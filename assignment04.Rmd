---
title: "Assignment 04"
author: "Hannah Hill & Imani Sherill"
date: "2/23/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(srvyr)
library(janitor)
library(dplyr)
census <- read_csv("poverty1.csv")
census <- census [9:63 , 1:5] %>%
  na.omit() %>%
  rename(category = 1) %>%
  rename(total_pop = 2) %>%
  rename(in_poverty = 3) %>%
  rename(moe = 4) %>%
  rename(percent_poverty = 5)
view(census)
```

```{r, cleaning data}
race <- census [2:6, 1:5] %>%
  rename(race = category)
age <- census [9:11, 1:5] %>%
  rename(age = category)
sex <- census [7:8, 1:5] %>%
  rename(sex = category)
nativity <- census [12:15, 1:5] %>%
  rename(nativity = category)
region <- census [16:19, 1:5] %>%
  rename(region = category)
metro <- census [20:23, 1:5] %>%
  rename(metro = category)
work_status <- census [25:28, 1:5] %>%
  rename(work_status = category)
disability <- census [30:31, 1:5] %>%
  rename(disability = category)
educ <- census [33:36, 1:5] %>%
  rename(educ = category)
```


```{r}
gini <- read_csv("gini.csv")
gini <- gini [4:63, 1:14] %>%
  rename(category = 1)
gini <- gini [4:63, 1:14] %>%
  na.omit() %>%
  rename(year = category) %>%
  rename(mean_lowest_quint = 2) %>%
  rename(mean_second_quint = 3) %>%
  rename(mean_middle_quint = 4) %>%
  rename(mean_fourth_quint = 5) %>%
  rename(mean_highest_quint = 6) %>%
  rename(mean_top5 = 7) %>%
  rename(gini_coefficient = 14)

inequality <- read_csv("inequality.csv")
#probably don't use inequality just use gini and census
```

## Data Visualization 1
# Race
```{r, visualization 1}
race %>%
  select(race, total_pop, in_poverty, percent_poverty) %>%
  # select(race, percent_poverty) %>%
  ggplot() +
  geom_col(mapping = aes(x = race, y = percent_poverty)) +
  labs(
    title = "Americans in Poverty in 2019 by Race",
    subtitle = "Data Visualization 01",
    caption = "Source: U.S. Census Bureau",
    x = "Race",
    y = "Percentage in Poverty"
  )
```

```{r, visualization 1}
# race %>%
#   select(race, total_pop, in_poverty, percent_poverty)
ggplot(race, aes(race, as.numericpercent_poverty)) + geom_col()
# Number of cars in each class:
g + geom_bar()
```
## Data Visualization 2
# Sex, Age, Educational Attainment
```{r}

```


## Data Visualization 3 - New dataset
# gini coefficient since 1967

``` {r}
gini %>%
  ggplot(mapping = aes(x = year, y = gini_coefficient)) +
  geom_area(fill = 1, alpha=0.4) +
  geom_point() +
  #scale_x_continuous(expand = expansion(mult = c(0.002, 0)),
                    # limits = c(1967, 2020),
                    # breaks = 1967:2020) +
  labs(x = "Year",
       y = "Gini Coefficients")
#### currently ugly, but passable. need to fix the y axis to be more spread out and not do every single .001 value.
#### compare to other graph that highlights boomer generation lack of poverty
```

### Imani's edits 
### data editing and cleaning 

```{r}
library(tidyverse)
library (haven)
library(janitor)
library(srvyr)
library (dplyr)
```

```{r}
##census <- read_excel(path = "relative/file/path/to/data")

census_poverty <- read_excel("poverty.xlsx") %>%
janitor::clean_names()
glimpse (census_poverty) 
```


```{r}
census_poverty <-  census_poverty [ 9 : 63, 1 : 5] %>% 
  na.omit() %>% 
  rename (category = 1 ) %>%
  rename( total_pop = 2) %>%
  rename (in_poverty = 3 ) %>% 
  rename (moe = 4 ) %>% 
  rename (percent_poverty = 5)
view (census_poverty)
```

```{r}
#data cleaning 

age <- census_poverty [ 1: 3, 1 : 5,  ] %>% 
  rename( age = category )
view (age)

nativity <- census_poverty [ 4 : 7, 1 : 5] %>% 
  rename (nativity = category)
view (nativity)

region <-  census_poverty [ 8 : 11, 1 :5 ] %>% 
  rename (region = category )
view (region )

metropolitan <-  census_poverty [12 : 15, 1 : 5] %>% 
  rename (metropolitan = category)
view (metropolitan)

employment <- census_poverty [17:21 , 1:5] %>% 
  rename (employment = category )
view (employment)

disability <-  census_poverty [ 22: 23, 1: 5] %>% 
  rename (disability = category)
view (disability)

educational_attainment <- census_poverty [25: 28, 1:5 ] %>% 
  rename (educational_attainment = category) 
view (educational_attainment)
```

```{r}
#transforming categorical variables to numeric 

age <- factor(c("under age 18", "aged 18 to 64", "aged 65 and older")) 
age 
age_num <- unclass(age)
age_num

view (nativity)
nativity <-  factor(c("native-born", "foreign-born", "naturalized citizen", "not a citizen"))
nativity_num <- unclass(nativity) 
nativity_num

view(region)
region <-  factor(c("Northeast", "Midwest", "South", "West"))
region_num <- unclass(region)
nativity_num

view (metropolitan)
metropolitan <-  factor(c("urban", "rural"))
metropolitan_num <- unclass(metropolitan)
metropolitan_num

view (employment)
employment <-  factor(c("all workers, worked full time", "part-time"))
employment_num <- unclass(employment)
employment_num

view (educational_attainment)
educational_attainment <- factor(c("no highschool diploma", "only highschool", "some college", "bachelor's degree or higher")) 
educational_attainment_num <- unclass(educational_attainment)
educational_attainment_num

ed_data <- census_poverty %>%
  filter(category %in% c("No high school diploma", "High school, no college", "Some college", "Bachelor's degree or higher"))
